# Ollama API Proxy for Anthropic Claude
# Standalone Docker Compose configuration
#
# Supported models:
#   - claude-opus, claude-4.5-opus    -> Claude Opus 4.5 (best for OCR, complex analysis)
#   - claude-sonnet, claude-4.5-sonnet -> Claude Sonnet 4.5 (balanced)
#   - claude-haiku, claude-4.5-haiku   -> Claude Haiku 4.5 (fast, ideal for tagging)
#
# Usage:
#   export ANTHROPIC_API_KEY="sk-ant-..."
#   docker compose up -d
#
# For Docker Swarm deployments, use docker-compose.swarm.yml instead.

services:
  ollama-claude-proxy:
    image: ghcr.io/benhumphry/ollama-claude-proxy:latest
    build:
      context: .
      dockerfile: Dockerfile
    ports:
      - "11434:11434"
    environment:
      - ANTHROPIC_API_KEY=${ANTHROPIC_API_KEY}
      - PORT=11434
      - HOST=0.0.0.0
    restart: unless-stopped
    healthcheck:
      test:
        [
          "CMD",
          "python",
          "-c",
          "import urllib.request; urllib.request.urlopen('http://localhost:11434/')",
        ]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 10s
